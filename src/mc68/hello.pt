from    testmc.mc6800  import  Machine

object_file = 'src/mc68/hello.p'

def test_hello(m, loadbios, S, R):
    istream, ostream = loadbios('tmc68', b'a0\rb1\x03')
    m.setregs(R(pc=S.hello))
    m.stepto(stopon=[0x02])

    expected = (
        b'\nHello: '
        b'a0'
        b'\nHello: '
        b'b1'
        b'\n'
        )
    assert expected == ostream.getvalue()
